<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KCI Case Tracker ‚Äî Admin Dashboard</title>

<link rel="icon" type="image/x-icon" href="img/favicon.ico" />

<style>
/* ==============================================================
   SHARED THEME VARIABLES (SAME AS INDEX.HTML)
   ============================================================== */
:root{
  --bg:#0f1115;
  --panel:#151923;
  --panel-2:#1A1F2B;
  --muted:#9aa4b2;
  --accent:#4F8CF0;
  --accent-2:#8A74F9;
  --text:#e6ebf3;
  --danger:#ff6b6b;
  --ok:#38d9a9;
  --warn:#ffd166;
  --border:#2a2f3a;
  --shadow:0 8px 24px rgba(0,0,0,.35);
  --radius:16px;
}
[data-theme="light"]{
  --bg:#f7f9fe;
  --panel:#ffffff;
  --panel-2:#f1f4fa;
  --muted:#4a5568;
  --text:#10131a;
  --border:#cfd6e4;
  --danger:#e34;
  --ok:#2b8;
  --warn:#d59b00;
  --shadow:0 4px 12px rgba(0,0,0,.08);
}

/* =====================================================
   THEME VARIABLES ‚Äî CUSTOM SELECT
   ===================================================== */

:root[data-theme="dark"] {
  --select-bg: #1A1F2B;
  --select-border: #2f3546;
  --select-text: #e6ebf3;

  --dropdown-bg: #111827;
  --dropdown-border: #30364a;

  --option-hover: #2a3042;
}

:root[data-theme="light"] {
  --select-bg: #ffffff;
  --select-border: #c9d1e2;
  --select-text: #1f2937;

  --dropdown-bg: #f9fafb;
  --dropdown-border: #cfd6e4;

  --option-hover: #e5e7eb;
}

*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
}

/* ============================================================
   HEADER ‚Äî EXACT MATCH TO TRACKER HEADER
   ============================================================ */
.header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: .65rem 1rem;   /* EXACT tracker padding */
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 50;
  height: 58px;           /* Exact tracker header height */
}

/* Match header button height from tracker */
.header .hdr-btn {
  padding: .6rem 1.2rem !important;
  font-size: 14px;
  line-height: 1.3;
}

.title{
  font-size:1.25rem;
  font-weight:700;
}
.grow{flex:1}


/* ============================================================
   MATCH TRACKER HEADER BUTTON STYLE
   ============================================================ */
/* Header buttons identical to tracker */
.hdr-btn {
  padding: .55rem 1.15rem !important;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel-2);
  cursor: pointer;
  font-weight: 500;
  font-size: 14px;
  white-space: nowrap;
  display: flex;
  align-items: center;
  justify-content: center;
}


.hdr-btn:hover{
  filter:brightness(1.08);
}

.theme-toggle{
  width:38px;height:38px;
  border-radius:50%;
  border:1px solid var(--border);
  background:var(--panel-2);
  display:grid;place-items:center;
  cursor:pointer;
}
.theme-toggle:hover{
  filter:brightness(1.08);
}

.user-name{
  font-weight:600;
  white-space:nowrap;
  padding-right:0.4rem;
   padding-top: 2px;
}

/* ============================================================
   TABS (STATS | USERS)
   ============================================================ */
/* ============================================================
   PILL SWITCHER TAB DESIGN (Users / Stats)
   ============================================================ */
.tab-bar {
  display: flex;
  gap: 0.5rem;
  padding: 0.75rem 1.2rem;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
}

.tab {
  display: flex;
  align-items: center;
  justify-content: center;   /* center the icon + text */
  gap: 6px;
  padding: 0.55rem 1.1rem;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 13px;
  color: var(--muted);
  transition: background 0.2s ease, border 0.2s ease, color 0.2s ease;
  width: 100%;               /* makes both tabs equal-width */
  text-align: center;        /* align text inside */
}


.tab:hover {
  color: var(--text);
  background: var(--panel-2);
}

.tab.active {
  background: var(--panel-2);
  color: var(--text);
  border: 1px solid var(--border);
}


/* ============================================================
   CONTENT AREA
   ============================================================ */
/* Remove horizontal padding so tables go edge-to-edge */
.content {
  padding: 1.2rem 0;  /* top/bottom padding only */
}


/* ============================================================
   TRACKER TABLE STYLE ‚Äî REPLICATED FOR ADMIN (Users + Stats)
   ============================================================ */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}

/* ============================================================
   CENTER-ALIGNED TABLE STYLE (Users + Stats)
   ============================================================ */
thead th {
  background: var(--panel-2);
  border-bottom: 1px solid var(--border);
   border-top: 1px solid var(--border);
  text-transform: uppercase;
  font-size: 12px;
  letter-spacing: .6px;
  padding: .55rem .75rem;
  text-align: center;       /* ‚Üê CENTER HEADER TEXT */
  vertical-align: middle;
  white-space: nowrap;
}

tbody td {
  border-bottom: 1px solid var(--border);
  padding: .55rem .75rem;
  vertical-align: middle;
  white-space: nowrap;
  text-align: center;       /* ‚Üê CENTER BODY TEXT */
}

/* Setting minimum row height */
tbody tr {
  height: 50px;       /* minimum visual height */
  min-height: 50px;   /* enforce minimum */
}


/* Make user table & stats table full width */
#usersTableWrap,
#statsTableWrap {
  width: 100%;
  padding: 0;       /* remove extra padding */
  margin: 0;
}

/* ============================================================
   FIX: Restore horizontal padding for headings & stats header
   (while keeping tables full-width edge-to-edge)
   ============================================================ */
.content h2,
.stats-header {
  padding-left: 1.2rem;
  padding-right: 1.2rem;
}

/* ============================================================
   SECONDARY ADMIN ‚Äî Users Table Equal Column Widths
   ============================================================ */
body[data-role="secondary"] #usersTableWrap table th,
body[data-role="secondary"] #usersTableWrap table td {
  width: 25%;
}

tbody tr:hover {
  background: rgba(255,255,255,0.05);
}

/* ============================================================
   STATS TABLE ‚Äî CLICKABLE USER CELL (SOFT ACCENT WASH)
   ============================================================ */
.stats-user-link {
  color: var(--text);
  cursor: pointer;
  font-weight: 500;
  transition: background 0.18s ease;
}

/* Soft accent wash with edge fade */
.stats-user-link:hover {
  background: linear-gradient(
    to right,
    rgba(79, 140, 240, 0.00),
    rgba(79, 140, 240, 0.14),
    rgba(79, 140, 240, 0.18),
    rgba(79, 140, 240, 0.14),
    rgba(79, 140, 240, 0.00)
  );
}

.action-btn{
  padding:0.35rem 0.6rem;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--panel-2);
  cursor:pointer;
  margin-right:0.35rem;
}
.action-btn:hover{
  filter:brightness(1.08);
}

/* ============================================================
   MODALS (Create Team, Update Data, Audit)
   ============================================================ */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:200;
}
.modal.show{
  display:flex;
}
.modal-card{
  width:min(600px, 92vw);
  background:var(--panel);
  border-radius:16px;
  border:1px solid var(--border);
  box-shadow:var(--shadow);
  overflow: visible; /* ‚úÖ allow dropdown escape */
}
.modal-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0.9rem 1rem;
  border-bottom:1px solid var(--border);
}
.modal-title{
  font-size:1.1rem;
  font-weight:700;
}
.modal-body{
  padding:1rem;
  max-height:60vh;

  /* ‚úÖ allow dropdowns to escape */
  overflow-y: auto;
  overflow-x: visible;

  position: relative;
}
.modal-foot{
  display:flex;
  justify-content:flex-end;
  gap:0.5rem;
  padding:0.8rem 1rem;
  border-top:1px solid var(--border);
}
.modal-btn{
  padding:0.55rem 1rem;
  background:var(--panel-2);
  border:1px solid var(--border);
  border-radius:999px;
  cursor:pointer;
}
.modal-btn:hover{
  filter:brightness(1.08);
}

/* CREATE TEAM ‚Äî Input + Button same row */
.create-team-row {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 1rem;
}

.create-team-row input {
  flex: 1;                 /* Fill remaining space */
}

.create-team-row button {
  white-space: nowrap;     /* Keep button text compact */
}


/* INPUTS */
.input{
  padding:0.6rem 0.8rem;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--panel-2);
}

/* ============================================================
   CREATE / MANAGE TEAM ‚Äî 2-ROW GRID LAYOUT
   ============================================================ */
.team-form-grid {
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

/* Row 1 */
.team-name {
  grid-column: 1 / 3;
  grid-row: 1;
}

/* Button spans both rows */
.team-submit {
  grid-column: 2 / 3;
  grid-row: 1 / 3;
  padding: 0.9rem 1.4rem;
  font-weight: 600;
  white-space: nowrap;

  border-radius: 10px;      /* ‚úÖ box style */
  height: 100%;             /* fills both rows cleanly */
  align-self: stretch;      /* ensures full vertical span */
}

/* Row 2 inputs */
.team-tz {
  grid-column: 1 / 2;
  grid-row: 2;
}

.team-reset {
  grid-column: 1 / 2;
  grid-row: 2;
}

/* Make row 2 split evenly */
.team-tz,
.team-reset {
  width: 100%;
}

/* Split row 2 into two equal columns */
.team-form-grid {
  grid-template-columns: 1fr 1fr auto;
}

.team-tz {
  grid-column: 1 / 2;
}

.team-reset {
  grid-column: 2 / 3;
}

.team-submit {
  grid-column: 3 / 4;
}


/* =============================================
   Upload row layout
   ============================================= */
.upload-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-top: .6rem;
}

/* Custom file input button */
.file-input-label {
  padding: .55rem 1rem;
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: .5rem;
  color: var(--text);
}

.file-input-label:hover {
  filter: brightness(1.08);
}

/* Hide actual input */
.file-input-label input[type="file"] {
  display: none;
}


/* ============================================================
   FIX ‚Äî Ensure form controls inherit text color in dark theme
   ============================================================ */
button, input, select, textarea {
  color: var(--text);
}

/* ============================================================
   FIX: Chrome vertical text centering for ALL admin buttons
   ============================================================ */

.hdr-btn,
.action-btn,
.modal-btn,
button {
  line-height: 1;              /* üîë critical fix */
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.hdr-btn {
  height: 38px;   /* matches tracker header buttons */
}

.action-btn,
.modal-btn {
  min-height: 34px;
}

/* Dropdown background + border visible in dark mode */
select.input,
select.user-role-dd,
select.user-team-dd,
.status-select {
  background: var(--panel-2);
  color: var(--text);
  border: 1px solid var(--border);
}

/* Action buttons always readable */
.action-btn,
.hdr-btn,
.modal-btn {
  color: var(--text);
  background: var(--panel-2);
  border: 1px solid var(--border);
}

/* ============================================================
   STATS HEADER BAR (Team Statistics + Filters)
   ============================================================ */
.stats-header,
.users-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
  gap: 1rem;
   padding-left: 2rem;
}

.stats-header-right {
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

/* Ensure stats team select + refresh stay in one row */
#statsControls {
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.stats-header select {
  width: auto !important;
  min-width: 150px;
}

#btnStatsRefresh {
  padding: 0.55rem 0.65rem !important;
  font-size: 18px;
}

/* ============================================================
   PREVIEW MODAL + PROGRESS UI
   ============================================================ */

#excelProgress {
  background: var(--panel-2);
  border: 1px solid var(--border);
  padding: 0.7rem 1rem;
  border-radius: 10px;
  white-space: pre-line;
}

#previewCounts strong {
  font-size: 16px;
}

#deleteCheckboxWrap input {
  transform: scale(1.2);
}

/* Tooltips for stats table header */
th .tooltip {
  position: absolute;
  top: 31px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--panel-2);
  border: 1px solid var(--border);
  padding: .35rem .5rem;
  border-radius: 8px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  z-index: 40;
   text-transform: none;
}

/* Show tooltip on hover */
th:hover .tooltip {
  opacity: 1;
}

/* ==========================================================
   CUSTOM DROPDOWN (REPLACES <select>)
   ========================================================== */

.custom-select {
  position: relative;
  width: 140px;              /* ‚úÖ fixed max width */
  max-width: 140px;
  margin: 0 auto;            /* ‚úÖ center inside table cell */
  cursor: pointer;
  font-size: 13px;
}

.custom-select-trigger {
  background: var(--select-bg);
  border: 1px solid var(--select-border);
  border-radius: 8px;
  padding: 6px 28px 6px 12px;

  display: flex;
  align-items: center;
  justify-content: flex-start;

  text-align: left;
  color: var(--select-text);
  min-height: 32px;
}

.custom-select-trigger::after {
  content: "";
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);

  width: 6px;
  height: 6px;

  border-left: 2px solid var(--select-text);
  border-bottom: 2px solid var(--select-text);
  transform: translateY(-50%) rotate(-45deg);

  opacity: 0.9;
  pointer-events: none;
}

/* Dropdown panel */
.custom-options {
  /* ‚ùó DO NOT position here ‚Äî JS controls it */
  position: fixed;

  background: var(--dropdown-bg);
  border: 1px solid var(--dropdown-border);
  border-radius: 8px;

  padding: 4px;
  z-index: 5000;

  box-shadow: 0 12px 30px rgba(0,0,0,0.6);

  display: none;
}

.custom-select.open .custom-options {
  display: block;
}
   
/* Each option */
.custom-option {
  padding: 4.8px 6px;
  border-radius: 4px;

  color: var(--select-text);
  font-weight: 500;
  background: transparent;
  text-align: left;
}

.custom-option:last-child {
  margin-bottom: 0;
}

.custom-option:hover {
  background: var(--option-hover);
}

/* ==========================================================
   CREATE / MANAGE TEAM MODAL ‚Äî FULL WIDTH SELECTS
   ========================================================== */
.team-form-grid .custom-select {
  width: 100%;
  max-width: 100%;
}

/* ==========================================================
   CREATE / MANAGE TEAM MODAL
   Scrollable dropdown with hidden scrollbar
   (ONLY for timezone & reset selectors)

   Scrollable dropdown (portal-safe)
   ========================================================== */

.custom-options.team-modal-dropdown {
  max-height: 177px;
  overflow-y: auto;
  overflow-x: hidden;
}

/* ==========================================================
   ADMIN PAGE ‚Äî USER TEAM & STATS TEAM DROPDOWNS
   Scrollable dropdown with hidden scrollbar
   ========================================================== */

.custom-options.admin-team-dropdown {
  max-height: 200px;
  overflow-y: auto;
  overflow-x: hidden;
}

/* Hide scrollbar ‚Äî Chrome, Edge, Safari */
.custom-options.admin-team-dropdown::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Hide scrollbar ‚Äî Firefox */
.custom-options.admin-team-dropdown {
  scrollbar-width: none;
}

/* Hide scrollbar ‚Äî Chrome, Edge, Safari */
.custom-options.team-modal-dropdown::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Hide scrollbar ‚Äî Firefox */
.custom-options.team-modal-dropdown {
  scrollbar-width: none;
}



</style>

</head>

<body>

<!-- ============================================================
     HEADER
     ============================================================ -->
<header class="header">
  <div class="title">The Admin Dashboard</div>
  <div class="grow"></div>

  <div class="user-name" id="adminUserName">Loading...</div>
  <button class="theme-toggle" id="adminTheme">üåô</button>

  <!-- Visible ONLY to primary admin -->
  <button class="hdr-btn" id="btnUpdateData">Update Data</button>
  <button class="hdr-btn" id="btnCreateTeam">Manage Teams</button>

  <!-- Visible to primary & secondary -->
  <button class="hdr-btn" id="btnGotoTracker">Tracker</button>

  <button class="hdr-btn" id="btnAdminLogout">Log Out</button>
</header>

<!-- ============================================================
     TAB BAR (STATS | USERS)
     ============================================================ -->
<div class="tab-bar">
  <div class="tab active" id="tabUsers">üë§ USERS</div>
  <div class="tab" id="tabStats">üìä STATS</div>
</div>


<!-- ============================================================
     CONTENT AREA (Sections will swap via JS)
     ============================================================ -->
<div class="content">

  <!-- USERS TAB -->
  <div id="sectionUsers">
     <div class="users-header">
    <h2>Manage Users</h2>
     </div>
    <div id="usersTableWrap"></div>
  </div>

  <!-- STATS TAB -->
  <div id="sectionStats" style="display:none;">
    <div class="stats-header">
    <h2>Team Statistics</h2>

    <div class="stats-header-right">
        <div id="statsControls"></div>
    </div>
</div>

    <div id="statsTableWrap"></div>
  </div>

</div>

<!-- ============================================================
     (Modals will be inserted in SECTION 1 ‚Äî Part 3)
     ============================================================ -->

<!-- ============================================================
     CREATE TEAM MODAL
     ============================================================ -->
<div class="modal" id="modalCreateTeam">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Create or Manage Teams</div>
      <button class="modal-btn" id="btnTeamClose">Close</button>
    </div>

    <div class="modal-body">

      <h3 id="teamModalTitle">Create New Team</h3>

<div class="team-form-grid">

  <!-- Row 1: Team name -->
  <input
    class="input team-name"
    id="newTeamName"
    placeholder="Enter team name..."
  />

  <!-- Button spans both rows -->
  <button class="modal-btn team-submit" id="btnTeamCreate">
    Create Team
  </button>

  <!-- Row 2: Timezone -->
   <div class="custom-select team-tz" id="newTeamTimezone">
     <div class="custom-select-trigger">Select Team Timezone</div>
     <div class="custom-options">
       <div class="custom-option" data-value="">Select Team Timezone</div>
   
       <div class="custom-option" data-value="Europe/London">UK (Europe/London)</div>
       <div class="custom-option" data-value="Europe/Berlin">Central Europe</div>
   
       <div class="custom-option" data-value="America/New_York">US ‚Äì Eastern</div>
       <div class="custom-option" data-value="America/Chicago">US ‚Äì Central</div>
       <div class="custom-option" data-value="America/Los_Angeles">US ‚Äì Pacific</div>
   
       <div class="custom-option" data-value="Asia/Kolkata">India</div>
       <div class="custom-option" data-value="Asia/Singapore">Singapore</div>
       <div class="custom-option" data-value="Asia/Dubai">Middle East</div>
   
       <div class="custom-option" data-value="Australia/Sydney">Australia</div>
       <div class="custom-option" data-value="Pacific/Auckland">New Zealand</div>
   
       <div class="custom-option" data-value="UTC">UTC</div>
     </div>
   </div>
   
   <!-- Row 2: Reset hour -->
   <div class="custom-select team-reset" id="newTeamResetHour">
     <div class="custom-select-trigger">Reset Time</div>
     <div class="custom-options">
       <div class="custom-option" data-value="">Reset Time</div>
   
       <div class="custom-option" data-value="0">12:00 AM</div>
       <div class="custom-option" data-value="1">1:00 AM</div>
       <div class="custom-option" data-value="2">2:00 AM</div>
       <div class="custom-option" data-value="3">3:00 AM</div>
       <div class="custom-option" data-value="4">4:00 AM</div>
       <div class="custom-option" data-value="5">5:00 AM</div>
       <div class="custom-option" data-value="6">6:00 AM</div>
       <div class="custom-option" data-value="7">7:00 AM</div>
       <div class="custom-option" data-value="8">8:00 AM</div>
       <div class="custom-option" data-value="9">9:00 AM</div>
       <div class="custom-option" data-value="10">10:00 AM</div>
       <div class="custom-option" data-value="11">11:00 AM</div>
       <div class="custom-option" data-value="12">12:00 PM</div>
       <div class="custom-option" data-value="13">1:00 PM</div>
       <div class="custom-option" data-value="14">2:00 PM</div>
       <div class="custom-option" data-value="15">3:00 PM</div>
       <div class="custom-option" data-value="16">4:00 PM</div>
       <div class="custom-option" data-value="17">5:00 PM</div>
       <div class="custom-option" data-value="18">6:00 PM</div>
       <div class="custom-option" data-value="19">7:00 PM</div>
       <div class="custom-option" data-value="20">8:00 PM</div>
       <div class="custom-option" data-value="21">9:00 PM</div>
       <div class="custom-option" data-value="22">10:00 PM</div>
       <div class="custom-option" data-value="23">11:00 PM</div>
     </div>
   </div>

</div>


      <hr style="margin:1rem 0;border-color:var(--border);" />

      <h3>Existing Teams</h3>
      <div id="teamList"></div>

    </div>

    <div class="modal-foot">
     <button class="modal-btn" id="btnTeamCancel">Cancel</button>
     <button class="modal-btn" id="btnTeamDone">Done</button>
   </div>
  </div>
</div>


<!-- ============================================================
     UPDATE DATA MODAL (EXCEL UPLOAD PER TEAM)
     ============================================================ -->
<div class="modal" id="modalUpdateData">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Update Case Data</div>
      <button class="modal-btn" id="btnUpdateClose">Close</button>
    </div>

    <div class="modal-body">

      <p>Select a team to upload data for:</p>
      <div id="updateTeamList"></div>

      <hr style="margin:1rem 0;border-color:var(--border);">

      <h3>Data Upload (XLSX)</h3>

<!-- Upload Row -->
<div class="upload-row">

  <!-- Custom File Selector -->
  <label class="file-input-label">
    <span>üìÑ Choose File</span>
    <input type="file" id="excelInput" accept=".xlsx,.xls">
  </label>

  <!-- Selected file name -->
  <div id="selectedFileName" style="opacity:0.8; font-size:13px;">No file selected</div>

  <!-- PREVIEW CHANGES button -->
  <button class="modal-btn" id="btnPreviewChanges" disabled>
    PREVIEW CHANGES
  </button>

</div>

<!-- Summary Area -->
<div id="uploadSummary" style="margin-top:1rem;">
  <strong>Selected Team:</strong> -
</div>

<!-- Progress Area (hidden until needed) -->
<div id="excelProgress" style="margin-top:1rem; display:none; font-size:14px; line-height:1.5;"></div>

       <!-- Preview Results (hidden until PREVIEW CHANGES is clicked) -->
<div id="previewSection" style="display:none; margin-top:1.5rem;">

  <h3>Preview Changes</h3>

  <div id="previewCounts" style="font-size:15px; line-height:1.7; margin-top:0.5rem;">
    <!-- filled by JS -->
  </div>

  <!-- Deletion Checkbox -->
  <div id="deleteCheckboxWrap" style="margin-top:1rem; display:none;">
    <label style="display:flex; align-items:center; gap:.5rem; cursor:pointer;">
      <input type="checkbox" id="allowDeletion">
      <span>Allow deletion of missing cases</span>
    </label>
  </div>

  <!-- Preview Buttons -->
  <div style="margin-top:1rem; display:flex; gap:0.6rem;">
    <button class="modal-btn" id="btnConfirmImport" disabled>Confirm Update</button>
    <button class="modal-btn" id="btnPreviewCancel">Cancel Preview</button>
  </div>

</div>




    </div>

    <div class="modal-foot">
      <button class="modal-btn" id="btnUpdateDone">Done</button>
    </div>
  </div>
</div>



<!-- ============================================================
     AUDIT MODAL (RANDOM 5 CASES)
     ============================================================ -->
<div class="modal" id="modalAudit">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Audit ‚Äî Random 5 Cases</div>
      <button class="modal-btn" id="btnAuditClose">Close</button>
    </div>

    <div class="modal-body">
      <div id="auditList"></div>
    </div>

    <div class="modal-foot">
      <button class="modal-btn" id="btnAuditOk">OK</button>
    </div>
  </div>
</div>

   <!-- ============================================================
     SP/MON NO FOLLOW CASES MODAL
     ============================================================ -->
<div class="modal" id="modalNoFollow">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title" id="noFollowTitle">Cases</div>
      <button class="modal-btn" id="btnNoFollowClose">Close</button>
    </div>

    <div class="modal-body">
      <div id="noFollowList"></div>
    </div>

    <div class="modal-foot">
      <button class="modal-btn" id="btnNoFollowOk">OK</button>
    </div>
  </div>
</div>


<!-- ============================================================
     TEAM REASSIGN MODAL (When deleting a team with users)
     ============================================================ -->
<div class="modal" id="modalReassign">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Reassign Users Before Deleting Team</div>
      <button class="modal-btn" id="btnReassignClose">Close</button>
    </div>

    <div class="modal-body">
      <p>You must reassign all users before deleting this team.</p>
      <p>Select a new team:</p>
      <select class="input" id="reassignTeamSelect"></select>

      <button class="modal-btn" id="btnReassignConfirm" style="margin-top:0.8rem;">
        Reassign Users
      </button>
    </div>

    <div class="modal-foot">
      <button class="modal-btn" id="btnReassignDone">Done</button>
    </div>
  </div>
</div>


<div class="modal" id="modalUserStats">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title" id="userStatsTitle">User Stats</div>
      <button class="modal-btn" id="btnUserStatsClose">Close</button>
    </div>

    <div class="modal-body">
      <pre id="userStatsBody"
           style="font-size:14px;white-space:pre-wrap;"></pre>
    </div>

    <div class="modal-foot">
      <button class="modal-btn" id="btnUserStatsOk">OK</button>
    </div>
  </div>
</div>



<!-- ADMIN PAGE LOGIC -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<script type="module" src="./admin.js?v=9"></script>



</body>

</html>





















































































